(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[93],{1342:function(e,t,n){"use strict";n.r(t);var a=n(11),i=n(2),c=n(44),o=n(37),r=n(3),s=n(252),d=n(5),l=function(e){return e.planning.view},u=Object(d.a)([l],(function(e){return e.record})),j={selectLoading:Object(d.a)([l],(function(e){return Boolean(e.loading)})),selectRecord:u,selectRaw:l},b=n(0),O=n(1),p=n.n(O),m=n(4),f=n(198),g=n(657),h=n(816),x=n(817),y=n(1307),v=(n(1253),n(1254),n(1255)),w=n(85),C=n(754),T=n(1272),k=n.n(T),q=function(e){var t=Object(i.useState)([""]),n=Object(f.a)(t,2),c=n[0],o=n[1],s=e.record,d=e.loading,l=Object(i.useState)([{finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0}]),u=Object(f.a)(l,2),j=u[0],O=u[1];Object(i.useEffect)((function(){!d&&s&&function(){var t=e.record?e.record.id:s.id;w.a.find(t).then((function(e){var t=[""];e.product[0].perWeek.map((function(e){t.push(e.week)})),t.shift(),o(t)}));var n=[{_id:"",finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0}],a={_id:"",finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0};s.product.map((function(e){a={_id:e._id,finishGood:e.finishGood,id:e.id,quantityInStock:e.quantityInStock,quantityRequested:e.quantityRequested,quantityToProduce:e.quantityToProduce,subassembly:e.subassembly},e.perWeek.map((function(e,t){Object.assign(a,{[e.week]:{Quantity:e.quantity,ToProduce:e.quantityToProduce,_id:e._id}})})),n.push(a)})),n.shift(),O(n)}()}),[!d&&s]);var T=function(){var t=Object(m.a)(p.a.mark((function t(n){var a,i,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.length>0&&(e.record.product.map((function(e,t){e._id===n[0].key._id&&(a=t,e.perWeek.map((function(e,t){var a=Object.keys(n[0].data);c=a[0],e.week===c&&(i=t)})))})),"finishGood"!==c&&"subassembly"!==c&&(e.record.product[a].perWeek[i].quantityToProduce=n[0].data[c].ToProduce),e.record.product[a].subassembly=void 0===n[0].data.subassembly?n[0].key.subassembly:n[0].data.subassembly,e.record.product[a].finishGood=void 0===n[0].data.finishGood?n[0].key.finishGood:n[0].data.finishGood,w.a.update(e.record.id,e.record));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(e){return Object(a.jsx)(k.a,{width:80,style:{color:"white"},switchedOnText:"YES",switchedOffText:"NO",defaultValue:e.value,onValueChanged:function(t){e.setValue(t.value)}})};return d||!s?Object(a.jsx)(g.a,{}):Object(a.jsxs)(C.a,{children:[Object(a.jsxs)(h.a,{gutter:24,children:[Boolean(s.name)&&Object(a.jsx)(x.a,{span:6,children:Object(a.jsx)(y.a.Item,Object(b.a)(Object(b.a)({},C.b),{},{label:Object(r.c)("entities.planning.fields.name"),children:s.name}))}),Boolean(s.year)&&Object(a.jsx)(x.a,{span:6,children:Object(a.jsx)(y.a.Item,Object(b.a)(Object(b.a)({},C.b),{},{label:Object(r.c)("entities.planning.fields.year"),children:s.year}))}),Boolean(s.week)&&Object(a.jsx)(x.a,{span:6,children:Object(a.jsx)(y.a.Item,Object(b.a)(Object(b.a)({},C.b),{},{label:Object(r.c)("entities.planning.fields.week"),children:s.week}))}),Boolean(s.status)&&Object(a.jsx)(x.a,{span:6,children:Object(a.jsx)(y.a.Item,Object(b.a)(Object(b.a)({},C.b),{},{label:Object(r.c)("entities.planning.fields.status"),children:Object(r.c)("entities.planning.enumerators.status.".concat(s.status))}))})]}),Object(a.jsxs)(v.DataGrid,{dataSource:j,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,children:[Object(a.jsx)(v.Selection,{mode:"multiple"}),Object(a.jsx)(v.GroupPanel,{visible:!1}),Object(a.jsx)(v.Grouping,{autoExpandAll:!0}),Object(a.jsx)(v.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(e){return T(e)}}),Object(a.jsx)(v.Column,{dataField:"id",allowEditing:!1}),Object(a.jsx)(v.Column,{dataField:"quantityInStock",allowEditing:!1}),Object(a.jsx)(v.Column,{dataField:"quantityToProduce",allowEditing:!1}),Object(a.jsx)(v.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(a.jsx)(v.Column,{dataField:"subassembly",dataType:"boolean",allowEditing:!0,editCellRender:q}),Object(a.jsx)(v.Column,{dataField:"finishGood",dataType:"boolean",allowEditing:!0,editCellRender:q}),null===c||void 0===c?void 0:c.map((function(e){return Object(a.jsxs)(v.Column,{caption:e,children:[Object(a.jsx)(v.Column,{caption:"Quantity",dataField:e+".Quantity",allowEditing:!1}),Object(a.jsx)(v.Column,{caption:"To Produce",dataField:e+".ToProduce",allowEditing:!0,cellRender:P})]})})),Object(a.jsx)(v.Scrolling,{columnRenderingMode:"virtual"}),Object(a.jsx)(v.Paging,{defaultPageSize:10}),Object(a.jsx)(v.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"compact",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(a.jsx)(v.Export,{enabled:!0,allowExportSelectedData:!0})]})]})};function P(e){return Object(a.jsx)("div",{style:{backgroundColor:"white",color:"black",paddingLeft:5,paddingRight:5},children:e.value})}var R=n(860),E=n(696),S=n(612),I=n(212),G=n(694),F=n(106),B=n(142),_=n(909),D=n(176),U=n(937),L=n(637),W=function(e){var t=Object(c.d)(),n=Object(o.h)(),i=Object(c.e)(B.a.selectPermissionToRead),s=Object(c.e)(_.a.selectPermissionToEdit),d=Object(c.e)(_.a.selectPermissionToDestroy),l=Object(c.e)(U.a.selectLoading),u=n.params.id;return Object(a.jsxs)(L.a,{children:[s&&Object(a.jsx)(F.a,{to:"/planning/".concat(u,"/edit"),children:Object(a.jsx)(I.a,{type:"primary",icon:Object(a.jsx)(R.a,{}),children:Object(r.c)("common.edit")})}),d&&Object(a.jsx)(G.a,{title:Object(r.c)("common.areYouSure"),onConfirm:function(){t(D.a.doDestroy(u))},okText:Object(r.c)("common.yes"),cancelText:Object(r.c)("common.no"),children:Object(a.jsx)(I.a,{type:"primary",icon:Object(a.jsx)(E.a,{}),disabled:l,children:Object(r.c)("common.destroy")})}),i&&Object(a.jsx)(F.a,{to:"/audit-logs?entityId=".concat(encodeURIComponent(u)),children:Object(a.jsx)(I.a,{icon:Object(a.jsx)(S.a,{}),children:Object(r.c)("auditLog.menu")})})]})},z=n(626),A=n(628),Q=n(627);t.default=function(e){var t=Object(c.d)(),n=Object(o.h)(),d=Object(c.e)(j.selectLoading),l=Object(c.e)(j.selectRecord);return Object(i.useEffect)((function(){t(s.a.doFind(n.params.id))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(A.a,{items:[[Object(r.c)("dashboard.menu"),"/"],[Object(r.c)("entities.planning.menu"),"/planning"],[Object(r.c)("entities.planning.view.title")]]}),Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(h.a,{children:[Object(a.jsx)(x.a,{span:16,children:Object(a.jsx)(Q.a,{children:Object(r.c)("entities.planning.view.title")})}),Object(a.jsx)(x.a,{span:8,style:{textAlign:"end"},children:Object(a.jsx)(W,{match:n})})]}),Object(a.jsx)(q,{loading:d,record:l})]})]})}},626:function(e,t,n){"use strict";var a=n(182);function i(){var e=Object(a.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"]);return i=function(){return e},e}var c=n(183).a.div(i());t.a=c},627:function(e,t,n){"use strict";var a=n(182);function i(){var e=Object(a.a)(["\n  margin-bottom: 36px;\n"]);return i=function(){return e},e}var c=n(183).a.h1(i());t.a=c},628:function(e,t,n){"use strict";var a=n(11),i=n(673),c=(n(2),n(106));t.a=function(e){var t=function(e){return e.length>1};return Object(a.jsx)(i.a,{children:e.items.map((function(e){return Object(a.jsx)(i.a.Item,{children:t(e)?Object(a.jsx)(c.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},637:function(e,t,n){"use strict";var a=n(182);function i(){var e=Object(a.a)(["\n  margin-bottom: 16px;\n\n  .ant-btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"]);return i=function(){return e},e}var c=n(183).a.div(i());t.a=c},657:function(e,t,n){"use strict";var a=n(11),i=n(658);n(2);t.a=function(e){return Object(a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(a.jsx)(i.a,{})})}},754:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(182);function i(){var e=Object(a.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]);return i=function(){return e},e}var c=n(183).a.div(i()),o={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};t.a=c},909:function(e,t,n){"use strict";var a=n(5),i=n(41),c=n(76),o=n(184),r=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningRead)})),s=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningEdit)})),d=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningCreate)})),l=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningImport)})),u={selectPermissionToRead:r,selectPermissionToEdit:s,selectPermissionToCreate:d,selectPermissionToDestroy:Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningDestroy)})),selectPermissionToImport:l};t.a=u},937:function(e,t,n){"use strict";var a=n(5),i={selectLoading:Object(a.a)([function(e){return e.planning.destroy}],(function(e){return Boolean(e.loading)}))};t.a=i}}]);