(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[76],{1233:function(e,t,n){},1320:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(43),c=n(36),o=n(3),s=n(246),r=n(5),d=function(e){return e.planning.view},l=Object(r.a)([d],(function(e){return e.record})),u={selectLoading:Object(r.a)([d],(function(e){return Boolean(e.loading)})),selectRecord:l,selectRaw:d},j=n(0),b=n(2),O=n(4),p=n(14),m=n(23),f=n(653),g=n(812),h=n(813),x=n(1286),y=(n(1233),n(1234)),v=n(84),w=n(752),C=n(1251),T=n.n(C),k=n(12),q=function(e){var t=Object(a.useState)([""]),n=Object(m.a)(t,2),i=n[0],c=n[1],s=e.record,r=e.loading,d=Object(a.useState)([{finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0}]),l=Object(m.a)(d,2),u=l[0],C=l[1];Object(a.useEffect)((function(){!r&&s&&function(){var t=e.record?e.record.id:s.id;v.a.find(t).then((function(e){var t=[""];e.product[0].perWeek.map((function(e){t.push(e.week)})),t.shift(),c(t)}));var n=[{_id:"",finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0}],a={_id:"",finishGood:!0,id:"",quantityInStock:0,quantityRequested:0,quantityToProduce:0,subassembly:!0};s.product.map((function(e){a={_id:e._id,finishGood:e.finishGood,id:e.id,quantityInStock:e.quantityInStock,quantityRequested:e.quantityRequested,quantityToProduce:e.quantityToProduce,subassembly:e.subassembly},e.perWeek.map((function(e,t){Object.assign(a,Object(p.a)({},e.week,{Quantity:e.quantity,ToProduce:e.quantityToProduce,_id:e._id}))})),n.push(a)})),n.shift(),C(n)}()}),[!r&&s]);var q=function(){var t=Object(O.a)(Object(b.a)().mark((function t(n){var a,i,c;return Object(b.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.length>0&&(e.record.product.map((function(e,t){e._id===n[0].key._id&&(a=t,e.perWeek.map((function(e,t){var a=Object.keys(n[0].data);c=a[0],e.week===c&&(i=t)})))})),"finishGood"!==c&&"subassembly"!==c&&(e.record.product[a].perWeek[i].quantityToProduce=n[0].data[c].ToProduce),e.record.product[a].subassembly=void 0===n[0].data.subassembly?n[0].key.subassembly:n[0].data.subassembly,e.record.product[a].finishGood=void 0===n[0].data.finishGood?n[0].key.finishGood:n[0].data.finishGood,v.a.update(e.record.id,e.record));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(e){return Object(k.jsx)(T.a,{width:80,style:{color:"white"},switchedOnText:"YES",switchedOffText:"NO",defaultValue:e.value,onValueChanged:function(t){e.setValue(t.value)}})};return r||!s?Object(k.jsx)(f.a,{}):Object(k.jsxs)(w.a,{children:[Object(k.jsxs)(g.a,{gutter:24,children:[Boolean(s.name)&&Object(k.jsx)(h.a,{span:6,children:Object(k.jsx)(x.a.Item,Object(j.a)(Object(j.a)({},w.b),{},{label:Object(o.c)("entities.planning.fields.name"),children:s.name}))}),Boolean(s.year)&&Object(k.jsx)(h.a,{span:6,children:Object(k.jsx)(x.a.Item,Object(j.a)(Object(j.a)({},w.b),{},{label:Object(o.c)("entities.planning.fields.year"),children:s.year}))}),Boolean(s.week)&&Object(k.jsx)(h.a,{span:6,children:Object(k.jsx)(x.a.Item,Object(j.a)(Object(j.a)({},w.b),{},{label:Object(o.c)("entities.planning.fields.week"),children:s.week}))}),Boolean(s.status)&&Object(k.jsx)(h.a,{span:6,children:Object(k.jsx)(x.a.Item,Object(j.a)(Object(j.a)({},w.b),{},{label:Object(o.c)("entities.planning.fields.status"),children:Object(o.c)("entities.planning.enumerators.status.".concat(s.status))}))})]}),Object(k.jsxs)(y.DataGrid,{dataSource:u,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,children:[Object(k.jsx)(y.Selection,{mode:"multiple"}),Object(k.jsx)(y.GroupPanel,{visible:!1}),Object(k.jsx)(y.Grouping,{autoExpandAll:!0}),Object(k.jsx)(y.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(e){return q(e)}}),Object(k.jsx)(y.Column,{dataField:"id",allowEditing:!1}),Object(k.jsx)(y.Column,{dataField:"quantityInStock",allowEditing:!1}),Object(k.jsx)(y.Column,{dataField:"quantityToProduce",allowEditing:!1}),Object(k.jsx)(y.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(k.jsx)(y.Column,{dataField:"subassembly",dataType:"boolean",allowEditing:!0,editCellRender:R}),Object(k.jsx)(y.Column,{dataField:"finishGood",dataType:"boolean",allowEditing:!0,editCellRender:R}),null===i||void 0===i?void 0:i.map((function(e){return Object(k.jsxs)(y.Column,{caption:e,children:[Object(k.jsx)(y.Column,{caption:"Quantity",dataField:e+".Quantity",allowEditing:!1}),Object(k.jsx)(y.Column,{caption:"To Produce",dataField:e+".ToProduce",allowEditing:!0,cellRender:P})]})})),Object(k.jsx)(y.Scrolling,{columnRenderingMode:"virtual"}),Object(k.jsx)(y.Paging,{defaultPageSize:100}),Object(k.jsx)(y.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"full",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(k.jsx)(y.Export,{enabled:!0,allowExportSelectedData:!0})]})]})};function P(e){return Object(k.jsx)("div",{style:{backgroundColor:"white",color:"black",paddingLeft:5,paddingRight:5},children:e.value})}var R=n(850),E=n(692),S=n(608),I=n(206),G=n(690),F=n(95),B=n(139),_=n(905),D=n(177),U=n(927),L=n(634),W=function(e){var t=Object(i.d)(),n=Object(c.h)(),a=Object(i.e)(B.a.selectPermissionToRead),s=Object(i.e)(_.a.selectPermissionToEdit),r=Object(i.e)(_.a.selectPermissionToDestroy),d=Object(i.e)(U.a.selectLoading),l=n.params.id;return Object(k.jsxs)(L.a,{children:[s&&Object(k.jsx)(F.a,{to:"/planning/".concat(l,"/edit"),children:Object(k.jsx)(I.a,{type:"primary",icon:Object(k.jsx)(R.a,{}),children:Object(o.c)("common.edit")})}),r&&Object(k.jsx)(G.a,{title:Object(o.c)("common.areYouSure"),onConfirm:function(){t(D.a.doDestroy(l))},okText:Object(o.c)("common.yes"),cancelText:Object(o.c)("common.no"),children:Object(k.jsx)(I.a,{type:"primary",icon:Object(k.jsx)(E.a,{}),disabled:d,children:Object(o.c)("common.destroy")})}),a&&Object(k.jsx)(F.a,{to:"/audit-logs?entityId=".concat(encodeURIComponent(l)),children:Object(k.jsx)(I.a,{icon:Object(k.jsx)(S.a,{}),children:Object(o.c)("auditLog.menu")})})]})},z=n(623),A=n(625),Q=n(624);t.default=function(e){var t=Object(i.d)(),n=Object(c.h)(),r=Object(i.e)(u.selectLoading),d=Object(i.e)(u.selectRecord);return Object(a.useEffect)((function(){t(s.a.doFind(n.params.id))}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A.a,{items:[[Object(o.c)("dashboard.menu"),"/"],[Object(o.c)("entities.planning.menu"),"/planning"],[Object(o.c)("entities.planning.view.title")]]}),Object(k.jsxs)(z.a,{children:[Object(k.jsxs)(g.a,{children:[Object(k.jsx)(h.a,{span:16,children:Object(k.jsx)(Q.a,{children:Object(o.c)("entities.planning.view.title")})}),Object(k.jsx)(h.a,{span:8,style:{textAlign:"end"},children:Object(k.jsx)(W,{match:n})})]}),Object(k.jsx)(q,{loading:r,record:d})]})]})}},623:function(e,t,n){"use strict";var a,i=n(183),c=n(184).a.div(a||(a=Object(i.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));t.a=c},624:function(e,t,n){"use strict";var a,i=n(183),c=n(184).a.h1(a||(a=Object(i.a)(["\n  margin-bottom: 36px;\n"])));t.a=c},625:function(e,t,n){"use strict";var a=n(669),i=(n(1),n(95)),c=n(12);t.a=function(e){var t=function(e){return e.length>1};return Object(c.jsx)(a.a,{children:e.items.map((function(e){return Object(c.jsx)(a.a.Item,{children:t(e)?Object(c.jsx)(i.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},634:function(e,t,n){"use strict";var a,i=n(183),c=n(184).a.div(a||(a=Object(i.a)(["\n  margin-bottom: 16px;\n\n  .ant-btn {\n    margin-right: 8px;\n    margin-bottom: 8px;\n  }\n"])));t.a=c},653:function(e,t,n){"use strict";var a=n(655),i=(n(1),n(12));t.a=function(e){return Object(i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(i.jsx)(a.a,{})})}},752:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a,i=n(183),c=n(184).a.div(a||(a=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]))),o={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};t.a=c},905:function(e,t,n){"use strict";var a=n(5),i=n(40),c=n(77),o=n(185),s=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningRead)})),r=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningEdit)})),d=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningCreate)})),l=Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningImport)})),u={selectPermissionToRead:s,selectPermissionToEdit:r,selectPermissionToCreate:d,selectPermissionToDestroy:Object(a.a)([i.a.selectCurrentTenant,i.a.selectCurrentUser],(function(e,t){return new c.a(e,t).match(o.a.values.planningDestroy)})),selectPermissionToImport:l};t.a=u},927:function(e,t,n){"use strict";var a=n(5),i={selectLoading:Object(a.a)([function(e){return e.planning.destroy}],(function(e){return Boolean(e.loading)}))};t.a=i}}]);